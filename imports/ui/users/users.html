
<template name="users">
  <div class="container">
    <div class="row">
      <h3>Select a user to play with</h3>

      <div class="col-md-6">
        {{#if currentUser }}

            <div id="users">
              <input class="search form-control" placeholder="Search by username" autofocus/>
              <small>if the search is not working then just change the current menu tab and come back to this tab again.</small>
              <br>
              <button class="sort btn btn-default pull-right" data-sort="name">
                Sort by name
              </button>
              <hr>
              {{#if Template.subscriptionsReady }}
              <ol class="list list-group">

                {{#each usersList}}
                <li class="list-group-item">

                  {{#if user.username }}
                  <span class="name">{{user.username}}</span>
                  {{else}}
                  <span class="name">{{user.profile.name}}</span>
                  {{/if}}
                  <span>
                  {{#if user.status.online}}
                    <i class="fa fa-circle" title="User is online" aria-hidden="true" style="color:lime;"></i>
                  {{else}}
                    <i class="fa fa-circle" title="User is offline" aria-hidden="true" style="color:orange;"></i>
                  {{/if}}
                </span>
                  <span class="btn-group pull-right">

                  {{#if runningGame}}
                    <a class="btn btn-xs btn-default" href="games/{{ runningGame._id }}">Continue Old Game</a>
                  {{else}}
                    {{#if isNull userStatus }}
                    <button type="button" class="btn-create btn btn-xs btn-info">Request New Game</button>
                    {{else}}
                      {{#if userStatus }}
                      <button type="button" class="btn-cancel btn btn-xs btn-danger">Cancel request</button>
                      {{else}}
                      <button type="button" class="btn-accept btn btn-xs btn-success">Accept request</button>
                      <button type="button" class="btn-decline btn btn-xs btn-danger">Decline request</button>
                      {{/if}}
                    {{/if}}
                  {{/if}}
                </span>
                    <br>
                  </li>
                {{/each}}

              </ol>
              {{else}}
                <div class="spinner text-warning">
                    {{>spinner}}
                </div>
              {{/if}}
            </div>
        {{else}}
          <h2>Please Login</h2>
        {{/if}}

      </div>
    </div>
  </div>
</template>
